<template>
  <div class="home pb-5 px-5 mx-5">
    <div class="px-5 mx-5">

      <div>
        <img 
          src="@/data/2eternals.jpg"
          class="home-movie-img"
          alt="movie-poster"
          @mouseover="show=true"
          @mouseleave="show=false"
          style="cursor: pointer;"
        >
        <div class="home-movie-info" v-if="show">
          <div class="d-flex align-items-end">
            <div class="px-4" style="text-align:left; font-size:100px">ì´í„°ë„ìŠ¤</div><br>
            <div>
              <p class="px-4" style="text-align:left; font-size:20px">ê°œë´‰ì¼ : 2021.11.06 (ì˜ˆì •)</p>
              <h5 class="px-4" style="text-align:left; font-size:15px">ê°ë… : í´ë¡œì´ ìì˜¤</h5>
              <h5 class="px-4" style="text-align:left; font-size:15px">ì£¼ì—° : ì•ˆì ¤ë¦¬ë‚˜ ì¡¸ë¦¬, ë¦¬ì°¨ë“œ ë§¤ë“ , ë§ˆë™ì„ ...</h5>
            </div>
          </div>
          <br><br><br>
          <h3 class="px-5" style="opacity:0.8; font-size:50px">ë§ˆë¸”ë¦¬ì˜ ë§ˆë¸” ë°ë·”ì‘! 11ì›” ëŒ€ê°œë´‰!</h3><br>
          <h5 class="px-5" style="opacity:0.8; font-size:30px">
            Marvel Studioì˜ ì‹ ì‘ 'ì´í„°ë„ìŠ¤' 
          </h5><br>
          <h5 class="px-5" style="opacity:0.8; font-size:30px">
            ìˆ˜ ì²œë…„ì— ê±¸ì³ ê·¸ ëª¨ìŠµì„ ë“œëŸ¬ë‚´ì§€ ì•Šê³  ì‚´ì•„ì˜¨ ë¶ˆë©¸ì˜ íˆì–´ë¡œë“¤ì´ 'ì–´ë²¤ì ¸ìŠ¤: ì—”ë“œê²Œì„' ì´í›„
          </h5>
          <h5 class="px-5" style="opacity:0.8; font-size:30px">
            ì¸ë¥˜ì˜ ê°€ì¥ ì˜¤ë˜ëœ ì  'ë°ë¹„ì•ˆì¸ 'ì— ë§ì„œê¸° ìœ„í•´ ë‹¤ì‹œ í˜ì„ í•©ì¹˜ë©´ì„œ ë²Œì–´ì§€ëŠ” ì´ì•¼ê¸°
          </h5>
        </div>
      </div>

      <hr><br><br>

      <div>
        <h1 class="font_style" style="text-align:left">ğŸŒˆì˜¤ëŠ˜ì˜ Movit's Pick</h1>
        <carousel-3d :autoplay="true" :autoplay-timeout="3000" :display="11" :width="400" :height="600">
          <slide v-for="(slide, i) in slides" :key="i" :index="i">
            <img 
              @click="imgClicked(movies[i].id)"
              :src="`https://image.tmdb.org/t/p/original${movies[i].poster_path}`"
              alt="image"
              style="width:100%; height:100%; cursor: pointer;"
              class="imggroup2"
            >
          </slide>
        </carousel-3d>
      </div>
      <br><br><br><br><br>

      <div>
        <h2 class="font_style">{{username}}ë‹˜ì„ ìœ„í•œ ì¶”ì²œì˜í™”ğŸ‘¨â€ğŸ“</h2><hr>
        <carousel-3d 
          :disable3d="true" 
          :space="230" 
          :clickable="false" 
          :controls-visible="true" 
          :width="200" 
          :height="270" 
          :autoplay="true" 
          :autoplay-timeout="3000"
        >
          <slide v-for="(slide_2d, i) in slides_2d" :key="i" :index="i">
            <img 
              @click="imgClicked(recommendedMovies[i].id)"
              :src="`https://image.tmdb.org/t/p/original${recommendedMovies[i].poster_path}`" alt="poster" style="width:100%; height:100%; cursor: pointer;"
              class="imggroup"
            >
          </slide>
        </carousel-3d>
      </div>
      <hr><br><br>

      <div>
        <h2 class="font_style">ë”ìœ„ë¥¼ ë‚ ë ¤ì¤„ ì§œë¦¿í•œ ì•¡ì…˜ ì‹œë¦¬ì¦ˆğŸ¬</h2><hr>
        <carousel-3d 
          :disable3d="true" 
          :space="230" 
          :clickable="false" 
          :controls-visible="true" 
          :width="200" 
          :height="270" 
          :autoplay="true" 
          :autoplay-timeout="3000"
        >
          <slide v-for="(slide_2d, i) in slides_2d" :key="i" :index="i">
            <img 
              @click="imgClicked(actionMovies[i].id)"
              :src="`https://image.tmdb.org/t/p/original${actionMovies[i].poster_path}`" alt="poster" style="width:100%; height:100%; cursor: pointer;"
              class="imggroup"
            >
          </slide>
        </carousel-3d>
      </div>
      <hr><br><br>

      <div>
        <h2 class="font_style">ì½”ë¡œë‚˜ë¡œ ì§‘ì½•í•˜ëŠ” ìš”ì¦˜ ë– ë‚˜ê³  ì‹¶ê²Œ ë§Œë“œëŠ” ëª¨í—˜ ì‹œë¦¬ì¦ˆğŸ›º</h2><hr>
        <carousel-3d :disable3d="true" :space="230" :clickable="false" :controls-visible="true" :width="200" :height="270" :autoplay="true" :autoplay-timeout="3000">
          <slide v-for="(slide_2d, i) in slides_2d" :key="i" :index="i">
            <img 
              @click="imgClicked(adventureMovies[i].id)"
              :src="`https://image.tmdb.org/t/p/original${adventureMovies[i].poster_path}`" alt="poster" style="width:100%; height:100%; cursor: pointer;" class="imggroup">
          </slide>
        </carousel-3d>
      </div>
      <hr><br><br>

      <div>
        <h2 class="font_style">ë‚¨ë…€ë…¸ì†Œ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì• ë‹ˆë©”ì´ì…˜ ì‹œë¦¬ì¦ˆğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§</h2><hr>
        <carousel-3d :disable3d="true" :space="230" :clickable="false" :controls-visible="true" :width="200" :height="270" :autoplay="true" :autoplay-timeout="3000">
          <slide v-for="(slide_2d, i) in slides_2d" :key="i" :index="i">
            <img 
              @click="imgClicked(animationMovies[i].id)"
              :src="`https://image.tmdb.org/t/p/original${animationMovies[i].poster_path}`" alt="poster" style="width:100%; height:100%; cursor: pointer;" class="imggroup">
          </slide>
        </carousel-3d>
      </div>
      <hr><br><br>

      <div>
        <h2 class="font_style">ì‹œê°„ ê°€ëŠ” ì¤„ ëª¨ë¥´ê³  ì›ƒëŠ” ì½”ë¯¸ë”” ì˜í™”ğŸ˜†</h2><hr>
        <carousel-3d :disable3d="true" :space="230" :clickable="false" :controls-visible="true" :width="200" :height="270" :autoplay="true" :autoplay-timeout="3000">
          <slide v-for="(slide_2d, i) in slides_2d" :key="i" :index="i">
            <img 
              @click="imgClicked(comedyMovies[i].id)"
              :src="`https://image.tmdb.org/t/p/original${comedyMovies[i].poster_path}`" alt="poster" style="width:100%; height:100%; cursor: pointer;" class="imggroup">
          </slide>
        </carousel-3d>
      </div>
      <hr><br><br>

      <div>
        <h2 class="font_style">ë”ìš´ ì—¬ë¦„ë°¤ì„ ì‹í˜€ì¤„ ê³µí¬ì˜í™” ì‹œë¦¬ì¦ˆğŸ˜±</h2><hr>
        <carousel-3d :disable3d="true" :space="230" :clickable="false" :controls-visible="true" :width="200" :height="270" :autoplay="true" :autoplay-timeout="3000">
          <slide v-for="(slide_2d, i) in slides_2d" :key="i" :index="i">
            <img 
              @click="imgClicked(horrorMovies[i].id)"
              :src="`https://image.tmdb.org/t/p/original${horrorMovies[i].poster_path}`" alt="poster" style="width:100%; height:100%; cursor: pointer;" class="imggroup">
          </slide>
        </carousel-3d>
      </div>
      <hr><br><br>

      <div>
        <h2 class="font_style">ë°ì´íŠ¸í•˜ê¸° ì¢‹ì€ ìš”ì¦˜ì— ë³´ë©´ ë”± ì¢‹ì€ ë¡œë§¨ìŠ¤ğŸ’</h2><hr>
        <carousel-3d :disable3d="true" :space="230" :clickable="false" :controls-visible="true" :width="200" :height="270" :autoplay="true" :autoplay-timeout="3000">
          <slide v-for="(slide_2d, i) in slides_2d" :key="i" :index="i">
            <img 
              @click="imgClicked(romanceMovies[i].id)"
              :src="`https://image.tmdb.org/t/p/original${romanceMovies[i].poster_path}`" alt="poster" style="width:100%; height:100%; cursor: pointer;" class="imggroup">
          </slide>
        </carousel-3d>
      </div>
      <hr>
      <br><br><br><br>

      <MovieCard 
        :currentUserId="currentUserId"
        :username="username"
        :isShowed="isShowed"
        :moviePosterId="moviePosterId"
      />
    </div>
 </div>
</template>

<script>
// @ is an alias to /src
import axios from 'axios'
import MovieCard from '@/components/MovieCard'

import Vue from 'vue'
import { Carousel3d, Slide } from 'vue-carousel-3d';
Vue.use('Carousel3d')

export default {
  name: 'Home',
  components:{
    MovieCard,
    Carousel3d,
    Slide,
  },
  props:{
    currentUserId: {
      type: Number,
    },
    username: {
      type: String,
    }
  },
  data () {
    return {
      movies: [],
      recommendedMovies: [],
      actionMovies: [],
      adventureMovies: [],
      animationMovies: [],
      comedyMovies: [],
      horrorMovies: [],
      romanceMovies: [],
      slides: 15,
      slides_2d: 15,
      show: false,
      isLiked: false,
      commentInput:'',
      score:0,
      movie: {},
      video: [],
      imgtoTitle: false,
      isShowed: false,
      moviePosterId: 0,
    }
  },
  methods: {
    setToken: function () {
      const token = localStorage.getItem('jwt')
      const config = {
        Authorization: `JWT ${token}`,
      }
      return config
    },
    getMoviePoster: function () {
      axios({
        method:'get',
        url: 'http://127.0.0.1:8000/movies/',
        headers: this.setToken(),
      })
        .then(res => {
          this.movies = res.data
        })
        .catch(err => { 
          console.log(err)
        })
    },
    getRecommendedMoviePoster: function () {
      axios({
        method:'get',
        url: 'http://127.0.0.1:8000/movies/recommend/',
        headers: this.setToken(),
      })
        .then(res => {
          this.recommendedMovies = res.data
        })
        .catch(err => { 
          console.log(err)
        })
    },
    getActionMoviePoster: function () {
      axios({
        method:'get',
        url: 'http://127.0.0.1:8000/movies/action/',
        headers: this.setToken(),
      })
        .then(res => {
          this.actionMovies = res.data
        })
        .catch(err => { 
          console.log(err)
        })
    },
    getAdventureMoviePoster: function () {
      axios({
        method:'get',
        url: 'http://127.0.0.1:8000/movies/adventure/',
        headers: this.setToken(),
      })
        .then(res => {
          this.adventureMovies = res.data
        })
        .catch(err => { 
          console.log(err)
        })
    },
    getAnimationMoviePoster: function () {
      axios({
        method:'get',
        url: 'http://127.0.0.1:8000/movies/animation/',
        headers: this.setToken(),
      })
        .then(res => {
          this.animationMovies = res.data
        })
        .catch(err => { 
          console.log(err)
        })
    },
    getComedyMoviePoster: function () {
      axios({
        method:'get',
        url: 'http://127.0.0.1:8000/movies/comedy/',
        headers: this.setToken(),
      })
        .then(res => {
          this.comedyMovies = res.data
        })
        .catch(err => { 
          console.log(err)
        })
    },
    getHorrorMoviePoster: function () {
      axios({
        method:'get',
        url: 'http://127.0.0.1:8000/movies/horror/',
        headers: this.setToken(),
      })
        .then(res => {
          this.horrorMovies = res.data
        })
        .catch(err => { 
          console.log(err)
        })
    },
    getRomanceMoviePoster: function () {
      axios({
        method:'get',
        url: 'http://127.0.0.1:8000/movies/romance/',
        headers: this.setToken(),
      })
        .then(res => {
          this.romanceMovies = res.data
        })
        .catch(err => { 
          console.log(err)
        })
    },
    imgClicked: function (PosterId) {
      this.isShowed = !this.isShowed
      this.moviePosterId = PosterId
    },
    
  },
  created() {
    this.getMoviePoster()
    this.getRecommendedMoviePoster()
    this.getActionMoviePoster()
    this.getAdventureMoviePoster()
    this.getAnimationMoviePoster()
    this.getComedyMoviePoster()
    this.getHorrorMoviePoster()
    this.getRomanceMoviePoster()
  },
  computed: {
    
  }

}
</script>

<style>
  .small-star {
    font-size:1.3vh;
  }
  .big-star {
    font-size:2vh;
  }

  .font_style {
    color: white;
  }
  .text-left {
    text-align:left;
  }
  .padding-7 {
    padding-left: 5%;
    padding-right: 5%;
  }
  .text-size {
    font-size:2vh;
  }
  h4 {
    text-align: left;
  }
  .home-movie-img {
    width: 100%;
    height: 100%;
  }
  .home-movie-info {
    position: absolute;
    top: 500px;
    width: 1520px;
    background-color: rgba(0, 0, 0, 0.5);
    color: #fcfcfc;
    padding: 3px;
  }
  .imggroup:hover {
    border-color: white;
    border-style: solid;
    border-width: thin;
    transition-duration:0.1s;
  }
  .imggroup2:hover {
    border-color: white;
    border-style: solid;
    transition-duration:0.1s;
  }
  #carousel3d .carousel-3d-slide {
  display: flex;
  flex: 1;
  flex-direction: column;
  justify-content: center;
  text-align: center;
  background-color: #fff;
  padding: 10px;
  transition: all 0.4s;
  }
  #carousel3d .carousel-3d-slide.current {
    background-color: #333;
    color: #fff;
  }
  #carousel3d .carousel-3d-slide.current span {
    font-size: 20px;
    font-weight: 500;
  }
</style>
